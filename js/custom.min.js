!function(){"use strict";function e(){$(window).width()>768?$(".footer-reveal").height($(".itb-footer").outerHeight()):$(".footer-reveal").height(0),$(window).scroll(function(){var e=$(this).scrollTop();$(".footer-reveal").height()>0?e>$(window).height()?$(".itb-footer").css("opacity","1"):$(".itb-footer").css("opacity","0"):$(".itb-footer").css("opacity","1")})}var t={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return t.Android()||t.BlackBerry()||t.iOS()||t.Opera()||t.Windows()}},i=function(){var e=jQuery(".owl-carousel-carousel");e.owlCarousel({items:3,loop:!0,margin:20,nav:!0,dots:!0,smartSpeed:800,autoHeight:!0,navText:["<i class='icon-keyboard_arrow_left owl-direction'></i>","<i class='icon-keyboard_arrow_right owl-direction'></i>"],responsive:{0:{items:1},600:{items:2},1e3:{items:3}}}),(e=jQuery(".owl-carousel-fullwidth")).owlCarousel({items:1,loop:!0,margin:20,nav:!1,dots:!0,smartSpeed:800,autoHeight:!0,autoplay:!0,navText:["<i class='icon-keyboard_arrow_left owl-direction'></i>","<i class='icon-keyboard_arrow_right owl-direction'></i>"]}),(e=jQuery(".owl-work")).owlCarousel({stagePadding:150,loop:!0,margin:20,nav:!0,dots:!1,mouseDrag:!1,autoWidth:!0,autoHeight:!0,autoplay:!0,autoplayTimeout:2e3,autoplayHoverPause:!0,navText:["<i class='icon-chevron-thin-left'></i>","<i class='icon-chevron-thin-right'></i>"],responsive:{0:{items:1,stagePadding:10},500:{items:2,stagePadding:20},600:{items:2,stagePadding:40},800:{items:2,stagePadding:100},1100:{items:3},1400:{items:4}}})},o=function(){jQuery(".flexslider").flexslider({animation:"fade",prevText:"",nextText:"",slideshow:!0})},r=function(){$(window).scroll(function(){$(this).scrollTop()>5?$(".itb-navbar").addClass("scrolled"):$(".itb-navbar").removeClass("scrolled")})},a=function(e){for(var t=function(e){for(var t,i,o,r,a=e.childNodes,n=a.length,s=[],l=0;l<n;l++)1===(t=a[l]).nodeType&&(i=t.children[0],console.log(t),o=i.getAttribute("data-size").split("x"),r={src:i.getAttribute("href"),w:parseInt(o[0],10),h:parseInt(o[1],10)},t.children.length>1&&(r.title=t.children[1].innerHTML),i.children.length>0&&(r.msrc=i.children[0].getAttribute("src")),r.el=t,s.push(r));return s},i=function e(t,i){return t&&(i(t)?t:e(t.parentNode,i))},o=function(e,i,o,r){var a,n,s=document.querySelectorAll(".pswp")[0];if(n=t(i),a={galleryUID:i.getAttribute("data-pswp-uid"),getThumbBoundsFn:function(e){var t=n[e].el.getElementsByTagName("img")[0],i=window.pageYOffset||document.documentElement.scrollTop,o=t.getBoundingClientRect();return{x:o.left,y:o.top+i,w:o.width}}},r)if(a.galleryPIDs){for(var l=0;l<n.length;l++)if(n[l].pid==e){a.index=l;break}}else a.index=parseInt(e,10)-1;else a.index=parseInt(e,10);isNaN(a.index)||(o&&(a.showAnimationDuration=0),new PhotoSwipe(s,PhotoSwipeUI_Default,n,a).init())},r=document.querySelectorAll(e),a=0,n=r.length;a<n;a++)r[a].setAttribute("data-pswp-uid",a+1),r[a].onclick=function(e){(e=e||window.event).preventDefault?e.preventDefault():e.returnValue=!1;var t=e.target||e.srcElement,r=i(t,function(e){return e.tagName&&"FIGURE"===e.tagName.toUpperCase()});if(r){for(var a,n=r.parentNode,s=r.parentNode.childNodes,l=s.length,c=0,u=0;u<l;u++)if(1===s[u].nodeType){if(s[u]===r){a=c;break}c++}return a>=0&&o(a,n),!1}};var s=function(){var e=window.location.hash.substring(1),t={};if(e.length<5)return t;for(var i=e.split("&"),o=0;o<i.length;o++)if(i[o]){var r=i[o].split("=");r.length<2||(t[r[0]]=r[1])}return t.gid&&(t.gid=parseInt(t.gid,10)),t}();s.pid&&s.gid&&o(s.pid,r[s.gid-1],!0,!0)},n=function(){if(jQuery(".portfolio-feed").length>0){var e=$(".portfolio-feed");e.imagesLoaded(function(){e.isotope({itemSelector:".grid-item",percentPosition:!0,masonry:{columnWidth:".grid-sizer",gutter:".gutter-sizer"}})})}},s=function(){t.any()||$(window).stellar()},l=function(){$("#time").timepicker(),$("#date").datepicker({format:"m/d/yyyy",autoclose:!0})},c=function(){$('.navbar-nav a:not([class="external"]), .footer-nav a').click(function(e){var t=$(this).attr("href"),i=$(t);return i.length&&$("html, body").animate({scrollTop:i.offset().top},2e3,"easeInOutExpo"),e.preventDefault(),!1})};$("body").scrollspy({target:"#navbar-collapse",offset:50});var u=function(){L.TileLayer.Grayscale=L.TileLayer.extend({options:{quotaRed:21,quotaGreen:71,quotaBlue:8,quotaDividerTune:0,quotaDivider:function(){return this.quotaRed+this.quotaGreen+this.quotaBlue+this.quotaDividerTune}},initialize:function(e,t){t.crossOrigin=!0,L.TileLayer.prototype.initialize.call(this,e,t),this.on("tileload",function(e){this._makeGrayscale(e.tile)})},_createTile:function(){var e=L.TileLayer.prototype._createTile.call(this);return e.crossOrigin="Anonymous",e},_makeGrayscale:function(e){if(!e.getAttribute("data-grayscaled")){e.crossOrigin="";var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var i=t.getContext("2d");i.drawImage(e,0,0);for(var o=i.getImageData(0,0,t.width,t.height),r=o.data,a=0,n=r.length;a<n;a+=4)r[a]=r[a+1]=r[a+2]=(this.options.quotaRed*r[a]+this.options.quotaGreen*r[a+1]+this.options.quotaBlue*r[a+2])/this.options.quotaDivider();i.putImageData(o,0,0),e.setAttribute("data-grayscaled",!0),e.src=t.toDataURL()}}}),L.tileLayer.grayscale=function(e,t){return new L.TileLayer.Grayscale(e,t)};var e=L.map("map",{scrollWheelZoom:!1}).setView([51.505,-.09],13);L.tileLayer.grayscale("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw",{maxZoom:18,attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',id:"mapbox.streets"}).addTo(e),L.marker([51.5,-.09]).addTo(e)};jQuery(function(){r(),a(".itb-gallery"),n(),s(),l(),c()}),jQuery(window).load(function(){i(),o(),e(),u()})}();